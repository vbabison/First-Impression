{"ast":null,"code":"var _jsxFileName = \"/Users/bobby/Desktop/Impressions/First-Impression/src/components/Home.js\",\n    _s = $RefreshSig$();\n\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport TextField from \"@material-ui/core/TextField\";\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\nimport PhoneIcon from \"@material-ui/icons/Phone\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [me, setMe] = useState(\"\");\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [idToCall, setIdToCall] = useState(\"\");\n  const [callEnded, setCallEnded] = useState(false);\n  const [name, setName] = useState(\"\");\n  const myVideo = useRef();\n  const userVideo = useRef();\n  const connectionRef = useRef();\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setStream(stream);\n      myVideo.current.srcObject = stream;\n    });\n    socket.on(\"me\", id => {\n      setMe(id);\n    });\n    socket.on(\"callUser\", data => {\n      setReceivingCall(true);\n      setCaller(data.from);\n      setName(data.name);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  const callUser = id => {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream: stream\n    });\n    peer.on(\"signal\", data => {\n      socket.emit(\"callUser\", {\n        userToCall: id,\n        signalData: data,\n        from: me,\n        name: name\n      });\n    });\n    peer.on(\"stream\", stream => {\n      userVideo.current.srcObject = stream;\n    });\n    socket.on(\"callAccepted\", signal => {\n      setCallAccepted(true);\n      peer.signal(signal);\n    });\n    connectionRef.current = peer;\n  };\n\n  const answerCall = () => {\n    setCallAccepted(true);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: stream\n    });\n    peer.on(\"signal\", data => {\n      socket.emit(\"answerCall\", {\n        signal: data,\n        to: caller\n      });\n    });\n    peer.on(\"stream\", stream => {\n      userVideo.current.srcObject = stream;\n    });\n    peer.signal(callerSignal);\n    connectionRef.current = peer;\n  };\n\n  const leaveCall = () => {\n    setCallEnded(true);\n    connectionRef.current.destroy();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        color: '#fff'\n      },\n      children: \"First Impressions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video\",\n          children: stream && /*#__PURE__*/_jsxDEV(\"video\", {\n            playsInline: true,\n            muted: true,\n            ref: myVideo,\n            autoPlay: true,\n            style: {\n              width: \"300px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video\",\n          children: callAccepted && !callEnded ? /*#__PURE__*/_jsxDEV(\"video\", {\n            playsInline: true,\n            ref: userVideo,\n            autoPlay: true,\n            style: {\n              width: \"300px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 6\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"myId\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"filled-basic\",\n          label: \"Name\",\n          variant: \"filled\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          style: {\n            marginBottom: \"20px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(CopyToClipboard, {\n          text: me,\n          style: {\n            marginBottom: \"2rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            startIcon: /*#__PURE__*/_jsxDEV(AssignmentIcon, {\n              fontSize: \"large\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 61\n            }, this),\n            children: \"Copy ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"filled-basic\",\n          label: \"ID to call\",\n          variant: \"filled\",\n          value: idToCall,\n          onChange: e => setIdToCall(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"call-button\",\n          children: [callAccepted && !callEnded ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            onClick: leaveCall,\n            children: \"End Call\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, this) : /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"primary\",\n            \"aria-label\": \"call\",\n            onClick: () => callUser(idToCall),\n            children: /*#__PURE__*/_jsxDEV(PhoneIcon, {\n              fontSize: \"large\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 7\n          }, this), idToCall]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: receivingCall && !callAccepted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"caller\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [name, \" is calling...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: answerCall,\n            children: \"Answer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"IZiDfJs3A1DnCF4TRJaTts67PTs=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/bobby/Desktop/Impressions/First-Impression/src/components/Home.js"],"names":["Button","IconButton","TextField","AssignmentIcon","PhoneIcon","React","useEffect","useRef","useState","Home","me","setMe","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callerSignal","setCallerSignal","callAccepted","setCallAccepted","idToCall","setIdToCall","callEnded","setCallEnded","name","setName","myVideo","userVideo","connectionRef","navigator","mediaDevices","getUserMedia","video","audio","then","current","srcObject","socket","on","id","data","from","signal","callUser","peer","Peer","initiator","trickle","emit","userToCall","signalData","answerCall","to","leaveCall","destroy","textAlign","color","width","e","target","value","marginBottom"],"mappings":"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","sourcesContent":["import Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport TextField from \"@material-ui/core/TextField\"\nimport AssignmentIcon from \"@material-ui/icons/Assignment\"\nimport PhoneIcon from \"@material-ui/icons/Phone\"\nimport React, { useEffect, useRef, useState } from \"react\"\n\nfunction Home() {\n  const [ me, setMe ] = useState(\"\")\n\tconst [ stream, setStream ] = useState()\n\tconst [ receivingCall, setReceivingCall ] = useState(false)\n\tconst [ caller, setCaller ] = useState(\"\")\n\tconst [ callerSignal, setCallerSignal ] = useState()\n\tconst [ callAccepted, setCallAccepted ] = useState(false)\n\tconst [ idToCall, setIdToCall ] = useState(\"\")\n\tconst [ callEnded, setCallEnded] = useState(false)\n\tconst [ name, setName ] = useState(\"\")\n\tconst myVideo = useRef()\n\tconst userVideo = useRef()\n\tconst connectionRef= useRef()\n\n\tuseEffect(() => {\n\t\tnavigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\n\t\t\tsetStream(stream)\n\t\t\t\tmyVideo.current.srcObject = stream\n\t\t})\n\n\tsocket.on(\"me\", (id) => {\n\t\t\tsetMe(id)\n\t\t})\n\n\t\tsocket.on(\"callUser\", (data) => {\n\t\t\tsetReceivingCall(true)\n\t\t\tsetCaller(data.from)\n\t\t\tsetName(data.name)\n\t\t\tsetCallerSignal(data.signal)\n\t\t})\n\t}, [])\n\n\tconst callUser = (id) => {\n\t\tconst peer = new Peer({\n\t\t\tinitiator: true,\n\t\t\ttrickle: false,\n\t\t\tstream: stream\n\t\t})\n\t\tpeer.on(\"signal\", (data) => {\n\t\t\tsocket.emit(\"callUser\", {\n\t\t\t\tuserToCall: id,\n\t\t\t\tsignalData: data,\n\t\t\t\tfrom: me,\n\t\t\t\tname: name\n\t\t\t})\n\t\t})\n\t\tpeer.on(\"stream\", (stream) => {\n\t\t\t\n\t\t\t\tuserVideo.current.srcObject = stream\n\t\t\t\n\t\t})\n\t\tsocket.on(\"callAccepted\", (signal) => {\n\t\t\tsetCallAccepted(true)\n\t\t\tpeer.signal(signal)\n\t\t})\n\n\t\tconnectionRef.current = peer\n\t}\n\n\tconst answerCall =() =>  {\n\t\tsetCallAccepted(true)\n\t\tconst peer = new Peer({\n\t\t\tinitiator: false,\n\t\t\ttrickle: false,\n\t\t\tstream: stream\n\t\t})\n\t\tpeer.on(\"signal\", (data) => {\n\t\t\tsocket.emit(\"answerCall\", { signal: data, to: caller })\n\t\t})\n\t\tpeer.on(\"stream\", (stream) => {\n\t\t\tuserVideo.current.srcObject = stream\n\t\t})\n\n\t\tpeer.signal(callerSignal)\n\t\tconnectionRef.current = peer\n\t}\n\n\tconst leaveCall = () => {\n\t\tsetCallEnded(true)\n\t\tconnectionRef.current.destroy()\n\t}\n  return (\n    <>\n\t\t\t<h1 style={{ textAlign: \"center\", color: '#fff' }}>First Impressions</h1>\n\t\t<div className=\"container\">\n\t\t\t<div className=\"video-container\">\n\t\t\t\t<div className=\"video\">\n\t\t\t\t\t{stream &&  <video playsInline muted ref={myVideo} autoPlay style={{ width: \"300px\" }} />}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"video\">\n\t\t\t\t\t{callAccepted && !callEnded ?\n\t\t\t\t\t<video playsInline ref={userVideo} autoPlay style={{ width: \"300px\"}} />:\n\t\t\t\t\tnull}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"myId\">\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"filled-basic\"\n\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\tvariant=\"filled\"\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\tstyle={{ marginBottom: \"20px\" }}\n\t\t\t\t/>\n\t\t\t\t<CopyToClipboard text={me} style={{ marginBottom: \"2rem\" }}>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<AssignmentIcon fontSize=\"large\" />}>\n\t\t\t\t\t\tCopy ID\n\t\t\t\t\t</Button>\n\t\t\t\t</CopyToClipboard>\n\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"filled-basic\"\n\t\t\t\t\tlabel=\"ID to call\"\n\t\t\t\t\tvariant=\"filled\"\n\t\t\t\t\tvalue={idToCall}\n\t\t\t\t\tonChange={(e) => setIdToCall(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"call-button\">\n\t\t\t\t\t{callAccepted && !callEnded ? (\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={leaveCall}>\n\t\t\t\t\t\t\tEnd Call\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<IconButton color=\"primary\" aria-label=\"call\" onClick={() => callUser(idToCall)}>\n\t\t\t\t\t\t\t<PhoneIcon fontSize=\"large\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t\t{idToCall}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{receivingCall && !callAccepted ? (\n\t\t\t\t\t\t<div className=\"caller\">\n\t\t\t\t\t\t<h1 >{name} is calling...</h1>\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\n\t\t\t\t\t\t\tAnswer\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n    </>\n  )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}